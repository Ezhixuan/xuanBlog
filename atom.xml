<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ezhixuan</title>
  <icon>https://www.ezhixuan.xyz/icon/android-chrome-192x192.png</icon>
  <subtitle>我们都要努力成为更好的自己 | 如果遇到了，就记录下来</subtitle>
  <link href="https://www.ezhixuan.xyz/atom.xml" rel="self"/>
  
  <link href="https://www.ezhixuan.xyz/"/>
  <updated>2023-09-07T07:00:14.000Z</updated>
  <id>https://www.ezhixuan.xyz/</id>
  
  <author>
    <name>Ezhixuan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hexo添加字数统计</title>
    <link href="https://www.ezhixuan.xyz/post/5904fa7e/"/>
    <id>https://www.ezhixuan.xyz/post/5904fa7e/</id>
    <published>2023-09-07T07:00:14.000Z</published>
    <updated>2023-09-07T07:00:14.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><h1 id="本篇文章使用的是hexo-stellar主题"><a class="markdownIt-Anchor" href="#本篇文章使用的是hexo-stellar主题"></a> 本篇文章使用的是hexo-stellar主题</h1></blockquote><h2 id="footerejs"><a class="markdownIt-Anchor" href="#footerejs"></a> footer.ejs</h2><p>首先找到<strong>node_modules/hexo-theme-stellar/layout/_partial/main/footer.ejs</strong>文件</p><p>末尾可直接复制整个footer.ejs文件</p><p>找到该代码所处区域</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// footer</span><br><span class="line">  el += &#x27;&lt;div class=&quot;text&quot;&gt;&#x27;;</span><br><span class="line">  if (content) &#123;</span><br><span class="line">    if ((typeof content == &#x27;string&#x27;) &amp;&amp; content.constructor == String) &#123;</span><br><span class="line">      el += markdown(content);</span><br><span class="line">    &#125; else if ((typeof content == &#x27;object&#x27;) &amp;&amp; content.constructor == Array) &#123;</span><br><span class="line">      content.forEach((item, i) =&gt; &#123;</span><br><span class="line">        el += markdown(item);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>在其尾部添加代码</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if (theme.footer.up_time) &#123;</span><br><span class="line">      el += &#x27;&lt;div&gt;&lt;span id=&quot;timeDate&quot;&gt;载入天数...&lt;/span&gt;&lt;span id=&quot;times&quot;&gt;载入时分秒...&lt;/span&gt;&#x27;;</span><br><span class="line">       if (theme.footer.busuanzi.enable) &#123;</span><br><span class="line">         el += &#x27;，&lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;总访问量: &lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;次&lt;/span&gt;&#x27;;</span><br><span class="line">         el += &#x27;，&lt;span id=&quot;busuanzi_container_site_uv&quot;&gt;访客数: &lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;人&lt;/span&gt;&#x27;;</span><br><span class="line">       &#125;</span><br><span class="line">      el += &#x27;&lt;/div&gt;&#x27;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>最后在最底部添加代码</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">function</span> <span class="title function_">createtime</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> grt= <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;09/01/2023 00:00:00&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    now.<span class="title function_">setTime</span>(now.<span class="title function_">getTime</span>()+<span class="number">250</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    days = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>; dnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(days);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    hours = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> - (<span class="number">24</span> * dnum); hnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(hours);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">if</span>(<span class="title class_">String</span>(hnum).<span class="property">length</span> ==<span class="number">1</span> )&#123;hnum = <span class="string">&quot;0&quot;</span> + hnum;&#125; minutes = (now - grt ) / <span class="number">1000</span> /<span class="number">60</span> - (<span class="number">24</span> * <span class="number">60</span> * dnum) - (<span class="number">60</span> * hnum);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    mnum = <span class="title class_">Math</span>.<span class="title function_">floor</span>(minutes); <span class="keyword">if</span>(<span class="title class_">String</span>(mnum).<span class="property">length</span> ==<span class="number">1</span> )&#123;mnum = <span class="string">&quot;0&quot;</span> + mnum;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    seconds = (now - grt ) / <span class="number">1000</span> - (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * dnum) - (<span class="number">60</span> * <span class="number">60</span> * hnum) - (<span class="number">60</span> * mnum);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    snum = <span class="title class_">Math</span>.<span class="title function_">round</span>(seconds); <span class="keyword">if</span>(<span class="title class_">String</span>(snum).<span class="property">length</span> ==<span class="number">1</span> )&#123;snum = <span class="string">&quot;0&quot;</span> + snum;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;timeDate&quot;</span>).<span class="property">innerHTML</span> = <span class="string">&quot;本站已运行 &quot;</span>+dnum+<span class="string">&quot; 天 &quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;times&quot;</span>).<span class="property">innerHTML</span> = hnum + <span class="string">&quot; 小时 &quot;</span> + mnum + <span class="string">&quot; 分 &quot;</span> + snum + <span class="string">&quot; 秒&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="built_in">setInterval</span>(<span class="string">&quot;createtime()&quot;</span>,<span class="number">250</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h3 id="最终代码"><a class="markdownIt-Anchor" href="#最终代码"></a> 最终代码</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">const content = theme.footer.content;</span><br><span class="line">function layoutDiv() &#123;</span><br><span class="line">  var el = &#x27;&#x27;;</span><br><span class="line">  el += &#x27;&lt;footer class=&quot;page-footer reveal fs12&quot;&gt;&#x27;;</span><br><span class="line">  el += &#x27;&lt;hr&gt;&#x27;;</span><br><span class="line">  // sitemap</span><br><span class="line">  if (theme.footer.sitemap &amp;&amp; Object.keys(theme.footer.sitemap).length &gt; 0) &#123;</span><br><span class="line">    el += &#x27;&lt;div class=&quot;sitemap&quot;&gt;&#x27;;</span><br><span class="line">    for (let group of Object.keys(theme.footer.sitemap)) &#123;</span><br><span class="line">      let items = theme.footer.sitemap[group];</span><br><span class="line">      if (items == undefined || items.length == 0) &#123;</span><br><span class="line">        continue;</span><br><span class="line">      &#125;</span><br><span class="line">      el += &#x27;&lt;div class=&quot;sitemap-group&quot;&gt;&#x27;;</span><br><span class="line">      el += &#x27;&lt;span class=&quot;fs14&quot;&gt;&#x27; + group + &#x27;&lt;/span&gt;&#x27;;</span><br><span class="line">      items.forEach((item, i) =&gt; &#123;</span><br><span class="line">        el += &#x27;&lt;a href=&quot;&#x27; + url_for(md_link(item)) + &#x27;&quot;&gt;&#x27;;</span><br><span class="line">        el += __(md_text(item));</span><br><span class="line">        el += &#x27;&lt;/a&gt;&#x27;;</span><br><span class="line">      &#125;);</span><br><span class="line">      el += &#x27;&lt;/div&gt;&#x27;;</span><br><span class="line">    &#125;</span><br><span class="line">    el += &#x27;&lt;/div&gt;&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  // footer</span><br><span class="line">  el += &#x27;&lt;div class=&quot;text&quot;&gt;&#x27;;</span><br><span class="line">  if (content) &#123;</span><br><span class="line">    if ((typeof content == &#x27;string&#x27;) &amp;&amp; content.constructor == String) &#123;</span><br><span class="line">      el += markdown(content);</span><br><span class="line">    &#125; else if ((typeof content == &#x27;object&#x27;) &amp;&amp; content.constructor == Array) &#123;</span><br><span class="line">      content.forEach((item, i) =&gt; &#123;</span><br><span class="line">        el += markdown(item);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  if (theme.footer.up_time) &#123;</span><br><span class="line">      el += &#x27;&lt;div&gt;&lt;span id=&quot;timeDate&quot;&gt;载入天数...&lt;/span&gt;&lt;span id=&quot;times&quot;&gt;载入时分秒...&lt;/span&gt;&#x27;;</span><br><span class="line">       if (theme.footer.busuanzi.enable) &#123;</span><br><span class="line">         el += &#x27;，&lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;总访问量: &lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;次&lt;/span&gt;&#x27;;</span><br><span class="line">         el += &#x27;，&lt;span id=&quot;busuanzi_container_site_uv&quot;&gt;访客数: &lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;人&lt;/span&gt;&#x27;;</span><br><span class="line">       &#125;</span><br><span class="line">      el += &#x27;&lt;/div&gt;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  el += &#x27;&lt;/div&gt;&lt;/footer&gt;&#x27;;</span><br><span class="line">  return el;</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%- layoutDiv() %&gt;</span><br><span class="line"></span><br><span class="line">&lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function createtime() &#123;</span><br><span class="line">    var now = new Date();</span><br><span class="line">    var grt= new Date(&quot;09/01/2023 00:00:00&quot;);</span><br><span class="line">    now.setTime(now.getTime()+250);</span><br><span class="line">    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);</span><br><span class="line">    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);</span><br><span class="line">    if(String(hnum).length ==1 )&#123;hnum = &quot;0&quot; + hnum;&#125; minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);</span><br><span class="line">    mnum = Math.floor(minutes); if(String(mnum).length ==1 )&#123;mnum = &quot;0&quot; + mnum;&#125;</span><br><span class="line">    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);</span><br><span class="line">    snum = Math.round(seconds); if(String(snum).length ==1 )&#123;snum = &quot;0&quot; + snum;&#125;</span><br><span class="line">    document.getElementById(&quot;timeDate&quot;).innerHTML = &quot;本站已运行 &quot;+dnum+&quot; 天 &quot;;</span><br><span class="line">    document.getElementById(&quot;times&quot;).innerHTML = hnum + &quot; 小时 &quot; + mnum + &quot; 分 &quot; + snum + &quot; 秒&quot;;</span><br><span class="line">  &#125;;</span><br><span class="line">  setInterval(&quot;createtime()&quot;,250);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="_configyml"><a class="markdownIt-Anchor" href="#_configyml"></a> _config.yml</h2><p>在主题目录（不是根目录）</p><p><strong>node_modules/hexo-theme-stellar/_config.yml</strong>添加如下配置即可</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">######## Footer ########</span><br><span class="line">footer:</span><br><span class="line">  ...</span><br><span class="line">  up_time:</span><br><span class="line">    enable: true</span><br><span class="line">  busuanzi:</span><br><span class="line">    enable: true</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">主题美化</summary>
    
    
    
    <category term="hexo" scheme="https://www.ezhixuan.xyz/categories/hexo/"/>
    
    
    <category term="hexo" scheme="https://www.ezhixuan.xyz/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>数据库表自增问题</title>
    <link href="https://www.ezhixuan.xyz/post/4fc13300/"/>
    <id>https://www.ezhixuan.xyz/post/4fc13300/</id>
    <published>2023-09-07T03:31:14.000Z</published>
    <updated>2023-09-07T03:31:14.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="数据库表自增问题"><a class="markdownIt-Anchor" href="#数据库表自增问题"></a> 数据库表自增问题</h2><blockquote><p>前言：因为在使用mp时没有在配置文件中设置自增策略，也没有使用@TableId注解去修饰id字段，导致数据库中的id在添加时使用mp默认的雪花算法，但这并不是我期望在本表中使用的，所以需要修改</p></blockquote><p>首先我赶紧在id字段上添加上@TableId(type = IdType.<em>AUTO</em>)</p><p>好消息是id变成+1的自增了</p><p>坏消息是仍然保持了最迟一次生成的雪花值在+1自增，即使这个雪花值已经被删除。</p><hr><p>MySQL 是一个开源的关系型数据库管理系统，广泛应用于各种企业和互联网应用中。在 MySQL 数据库中，自增键是一种非常常用的类型，能够简化开发者的开发工作。但有时候我们需要能够动态修改自增值。下面介绍一下如何使用 MySQL 实现动态修改自增值的方法。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE tableName AUTO_INCREMENT = value;</span><br></pre></td></tr></table></figure><p>以上代码可以改变指定表的 AUTO_INCREMENT 值，设置自增键的下一个值为 value。首先需要了解的是，MySQL 中自增键是用于提供唯一值的一种类型，即每个自增键值都必须是唯一的。我们可以通过以下步骤实现动态修改自增值：</p><ol><li><p>查看数据库中的所有表：</p><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span>;</span><br></pre></td></tr></table></figure><p>确定需要修改自增值的表。</p></li><li><p>查看表的结构信息：</p><figure class="highlight abnf"><table><tr><td class="code"><pre><span class="line">DESCRIBE tableName<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>确定需要修改自增值的字段和表名。</p></li><li><p>使用ALTER TABLE命令修改自增值：</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tableName AUTO_INCREMENT <span class="operator">=</span> <span class="keyword">value</span>;</span><br></pre></td></tr></table></figure><p>将自增键的下一个值设置为指定的value。</p></li></ol><p>通过以上步骤，就可以在MySQL数据库中实现动态修改自增值。</p>]]></content>
    
    
    <summary type="html">问题处理</summary>
    
    
    
    <category term="mysql" scheme="https://www.ezhixuan.xyz/categories/mysql/"/>
    
    
    <category term="mysql" scheme="https://www.ezhixuan.xyz/tags/mysql/"/>
    
    <category term="问题处理" scheme="https://www.ezhixuan.xyz/tags/%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Hexo文章图片显示</title>
    <link href="https://www.ezhixuan.xyz/post/528f971c/"/>
    <id>https://www.ezhixuan.xyz/post/528f971c/</id>
    <published>2023-09-05T05:20:14.000Z</published>
    <updated>2023-09-05T05:20:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>配置<br>直接进入到你hexo的目录，右键打开git bash命令行，执行npm install hexo-asset-image –save</p><p>接着node_modules -&gt; hexo-asset-image -&gt; index.js</p><p>第58行找到，或者直接全局搜索也行</p><div class="tag-plugin copy"><input class="copy-area" readonly id="copy_1" value="$(this).attr(src, config.root + link + src);"><button class="copy-btn" onclick="util.copy(&quot;copy_1&quot;,&quot;Copied!&quot;)"><svg class="icon copy-btn" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"/></svg></button></div><p>修改为</p><div class="tag-plugin copy"><input class="copy-area" readonly id="copy_2" value="$(this).attr(src, src);"><button class="copy-btn" onclick="util.copy(&quot;copy_2&quot;,&quot;Copied!&quot;)"><svg class="icon copy-btn" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"/></svg></button></div><div class="tag-plugin image"><div class="image-bg"><img src="/.xyz//image-20230905132247109.png" alt="image-20230905132247109"></div><div class="image-meta"><span class="image-caption center">image-20230905132247109</span></div></div><p>然后在hexo目录的_config.yml配置文件中设置</p><div class="tag-plugin copy"><input class="copy-area" readonly id="copy_3" value="post_asset_folder: true"><button class="copy-btn" onclick="util.copy(&quot;copy_3&quot;,&quot;Copied!&quot;)"><svg class="icon copy-btn" viewbox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"/></svg></button></div><div class="tag-plugin image"><div class="image-bg"><img src="/.xyz//image-20230905132432534.png" alt="image-20230905132432534"></div><div class="image-meta"><span class="image-caption center">image-20230905132432534</span></div></div><p>每次生成new 一篇文章的时候会自动再同目录下生成相同名的文件夹，该文件夹下存放你的图片地址</p><p>如果使用typora软件的话，进行如下配置，在插入图片时会自动插入到同名文件夹下</p><div class="tag-plugin image"><div class="image-bg"><img src="/.xyz//image-20230905132639300.png" alt="image-20230905132639300"></div><div class="image-meta"><span class="image-caption center">image-20230905132639300</span></div></div>]]></content>
    
    
    <summary type="html">主题优化</summary>
    
    
    
    <category term="hexo" scheme="https://www.ezhixuan.xyz/categories/hexo/"/>
    
    
    <category term="hexo" scheme="https://www.ezhixuan.xyz/tags/hexo/"/>
    
  </entry>
  
</feed>
