<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://gcore.jsdelivr.net">
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="//unpkg.com">

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>Redis - Ezhixuan</title>

  
    <meta name="description" content="技术学习分享">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis">
<meta property="og:url" content="https://www.ezhixuan.xyz/post/bae4ff13/">
<meta property="og:site_name" content="Ezhixuan">
<meta property="og:description" content="技术学习分享">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230909235730879.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910094421648.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910095004564.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910095620287.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910100324015.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910100641315.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910102106812.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910102505152.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910102816901.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910103001935.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910103617539.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910104219300.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910104231479.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910104322343.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910104554375.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910104723789.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910104847624.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910104855681.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910111015754.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910111103188.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910111141708.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910111259652.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910111542814.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910151725241.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910151738447.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910151746275.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910152127127.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230910152237788.png">
<meta property="article:published_time" content="2023-09-09T16:35:48.000Z">
<meta property="article:modified_time" content="2023-09-09T16:35:48.000Z">
<meta property="article:author" content="Ezhixuan">
<meta property="article:tag" content="java">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.ezhixuan.xyz/post/bae4ff13/image-20230909235730879.png">
  
  
  
  <meta name="keywords" content="java,redis">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="Ezhixuan" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://s1.ax1x.com/2023/09/02/pPB0E4O.png">
  

  

  
    <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
    <script defer src="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
    <script defer src="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
  


  
</head>

<body>
  




  <div class="l_body" id="start">
    <aside class="l_left" layout="post">
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/img/avatar.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Ezhixuan</div><div class="sub normal cap">我们都要努力成为更好的自己</div><div class="sub hover cap" style="opacity:0"> 如果遇到了，就记录下来</div></a></div>

<nav class="menu dis-select"><a class="nav-item active" href="/">文章</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/notes/">随笔</a><a class="nav-item" href="/about/">关于</a></nav>
</header>


<div class="widgets">
<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" data-filter="/post/" placeholder="文章搜索"><svg t="1670596976048" class="icon search-icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"/></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>


<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">Redis</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFredis"><span class="toc-text"> 什么是redis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E5%AE%89%E8%A3%85"><span class="toc-text"> redis安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows"><span class="toc-text"> windows</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux"><span class="toc-text"> linux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85redis%E4%BE%9D%E8%B5%96"><span class="toc-text"> 安装Redis依赖</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E5%90%AF%E5%8A%A8"><span class="toc-text"> redis启动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8"><span class="toc-text"> 指定配置启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#133%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="toc-text"> 1.3.3.开机自启</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text"> redis的基本数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#string"><span class="toc-text"> String</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hash"><span class="toc-text"> hash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list"><span class="toc-text"> list</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set"><span class="toc-text"> set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sortedset"><span class="toc-text"> sortedSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redis%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text"> redis常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text"> 通用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string-2"><span class="toc-text"> String</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hash-2"><span class="toc-text"> Hash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#list-2"><span class="toc-text"> List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set-2"><span class="toc-text"> Set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sortedset-2"><span class="toc-text"> sortedSet</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text"> 其他数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bitmap"><span class="toc-text"> bitmap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#geogeospatial"><span class="toc-text"> Geo(Geospatial)</span></a></li></ol></li></ol></div></div></widget>




</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/Ezhixuan/" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/08a41b181ce68.svg"></a></div></footer>

    </aside>
    <div class="l_main">
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/">技术分享</a></div><div id="post-meta">发布于&nbsp;<time datetime="2023-09-09T16:35:48.000Z">2023-09-10</time></div></div>

<article class="md-text content post">
<h1 class="article-title"><span>Redis</span></h1>
<h2 id="什么是redis"><a class="markdownIt-Anchor" href="#什么是redis"></a> 什么是redis</h2>
<p>redis是一款<strong>基于内存存储</strong>的开源<strong>NoSQL数据库</strong>，存储形式是<strong>基于key-value</strong>来进行存储的，提供了5种基本类型例如String，List，set，Zset，hash，一般可以用于作为业务与数据库之间的<strong>缓存中间件</strong>，或者作为数据库，实现<strong>消息队列</strong>，排行榜，好友关注，地理信息存储。因为redis是<strong>单线程</strong>的，每个命令都具备原子性，所以避免多线程之间的资源竞争和线程切换导致的资源消耗，同时因为基于内存存储，并且通过<strong>IO的多路复用</strong>，实现了<strong>低延迟速度快的特点</strong>。虽然基于内存，但是提供了<strong>数据持久化</strong>的解决方案，并且提供了主从复制和哨兵机制来实现<strong>redis的高可用</strong>，同时可以通过部署<strong>分片集群来支持海量数据</strong>的存储。</p>
<h2 id="redis安装"><a class="markdownIt-Anchor" href="#redis安装"></a> redis安装</h2>
<h3 id="windows"><a class="markdownIt-Anchor" href="#windows"></a> windows</h3>
<p>实际上并不推荐在windows上安装redis，Redis官方也没有提供Windows版本的安装包。</p>
<p>不过可以网上下载一下平时使用也能满足大部分需要。</p>
<h3 id="linux"><a class="markdownIt-Anchor" href="#linux"></a> linux</h3>
<h4 id="安装redis依赖"><a class="markdownIt-Anchor" href="#安装redis依赖"></a> 安装Redis依赖</h4>
<p>redis是基于C语言编写的，所以需要先安装redis所需要的gcc依赖</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">yum install -y gcc tcl</span><br></pre></td></tr></table></figure>
<p>到redis官网下载最新版的安装包<a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/download/#redis-downloads">Download | Redis</a></p>
<p>将安装包上传至linux虚拟机</p>
<p>到达上传目录</p>
<p>解压缩：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">tar -xzf redis-7.2.1.tar.gz</span><br></pre></td></tr></table></figure>
<p>解压后进入redis目录</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> redis-7.2.1</span><br></pre></td></tr></table></figure>
<p>运行编译命令：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>我们使用 <code>cd /usr/local/bin</code></p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">[root@localhost <span class="built_in">local</span>]<span class="comment"># ll /usr/local/bin</span></span><br><span class="line">总用量 41668</span><br><span class="line">-rwxr-xr-x. 1 root root  6900720 9月   9 23:48 redis-benchmark</span><br><span class="line">lrwxrwxrwx. 1 root root       12 9月   9 23:48 redis-check-aof -&gt; redis-server</span><br><span class="line">lrwxrwxrwx. 1 root root       12 9月   9 23:48 redis-check-rdb -&gt; redis-server</span><br><span class="line">-rwxr-xr-x. 1 root root  7619712 9月   9 23:48 redis-cli</span><br><span class="line">lrwxrwxrwx. 1 root root       12 9月   9 23:48 redis-sentinel -&gt; redis-server</span><br><span class="line">-rwxr-xr-x. 1 root root 15411608 9月   9 23:48 redis-server</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>看到如下目录即是安装成功</p>
<p>该目录以及默认配置到环境变量，因此可以在任意目录下运行这些命令。其中：</p>
<ul>
<li>redis-cli：是redis提供的命令行客户端</li>
<li>redis-server：是redis的服务端启动脚本</li>
<li>redis-sentinel：是redis的哨兵启动脚本</li>
</ul>
<h2 id="redis启动"><a class="markdownIt-Anchor" href="#redis启动"></a> redis启动</h2>
<p>安装完成后，在任意目录输入redis-server命令即可启动Redis：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">redis-server</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230909235730879.png" alt="image-20230909235730879"></div><div class="image-meta"><span class="image-caption center">image-20230909235730879</span></div></div>
<p>这种启动属于<code>前台启动</code>，会阻塞整个会话窗口，窗口关闭或者按下<code>CTRL + C</code>则Redis停止。不推荐使用。</p>
<h3 id="指定配置启动"><a class="markdownIt-Anchor" href="#指定配置启动"></a> 指定配置启动</h3>
<p>如果要让Redis以<code>后台</code>方式启动，则必须修改Redis配置文件，就在我们之前解压的redis安装包下（<code>/usr/local/redis/redis-7.2.1</code>），名字叫redis.conf：</p>
<p>我们先将这个配置文件备份一份：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cp</span> redis.conf redis.conf.bck</span><br></pre></td></tr></table></figure>
<p>然后修改redis.conf文件中的一些配置：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 允许访问的地址，默认是127.0.0.1，会导致只能在本地访问。修改为0.0.0.0则可以在任意IP访问，生产环境不要设置为0.0.0.0</span></span><br><span class="line"><span class="attr">bind</span> <span class="string">0.0.0.0</span></span><br><span class="line"><span class="comment"># 守护进程，修改为yes后即可后台运行</span></span><br><span class="line"><span class="attr">daemonize</span> <span class="string">yes </span></span><br><span class="line"><span class="comment"># 密码，设置后访问Redis必须输入密码</span></span><br><span class="line"><span class="attr">requirepass</span> <span class="string">123321</span></span><br></pre></td></tr></table></figure>
<p>Redis的其它常见配置：</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 监听的端口</span></span><br><span class="line"><span class="attr">port</span> <span class="string">6379</span></span><br><span class="line"><span class="comment"># 工作目录，默认是当前目录，也就是运行redis-server时的命令，日志、持久化等文件会保存在这个目录</span></span><br><span class="line"><span class="attr">dir</span> <span class="string">.</span></span><br><span class="line"><span class="comment"># 数据库数量，设置为1，代表只使用1个库，默认有16个库，编号0~15</span></span><br><span class="line"><span class="attr">databases</span> <span class="string">1</span></span><br><span class="line"><span class="comment"># 设置redis能够使用的最大内存</span></span><br><span class="line"><span class="attr">maxmemory</span> <span class="string">512mb</span></span><br><span class="line"><span class="comment"># 日志文件，默认为空，不记录日志，可以指定日志文件名</span></span><br><span class="line"><span class="attr">logfile</span> <span class="string">&quot;redis.log&quot;</span></span><br></pre></td></tr></table></figure>
<p>启动Redis：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 进入redis安装目录 </span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/redis/redis-7.2.1</span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line">redis-server redis.conf</span><br></pre></td></tr></table></figure>
<p>停止服务：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 利用redis-cli来执行 shutdown 命令，即可停止 Redis 服务，</span></span><br><span class="line"><span class="comment"># 因为之前配置了密码，因此需要通过 -u 来指定密码</span></span><br><span class="line">redis-cli -u 你的密码 shutdown</span><br></pre></td></tr></table></figure>
<h3 id="133开机自启"><a class="markdownIt-Anchor" href="#133开机自启"></a> 1.3.3.开机自启</h3>
<p>我们也可以通过配置来实现开机自启。</p>
<p>首先，新建一个系统服务文件：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">vi /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure>
<p>内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=redis-server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/bin/redis-server /usr/local/redis/redis-7.2.1/redis.conf</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>
<p>然后重载系统服务：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>
<p>现在，我们可以用下面这组命令来操作redis了：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 启动</span></span><br><span class="line">systemctl start redis</span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line">systemctl stop redis</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">systemctl restart redis</span><br><span class="line"><span class="comment"># 查看状态</span></span><br><span class="line">systemctl status redis</span><br></pre></td></tr></table></figure>
<p>执行下面的命令，可以让redis开机自启：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> redis</span><br></pre></td></tr></table></figure>
<h2 id="redis的基本数据类型"><a class="markdownIt-Anchor" href="#redis的基本数据类型"></a> redis的基本数据类型</h2>
<h3 id="string"><a class="markdownIt-Anchor" href="#string"></a> String</h3>
<p>Redis 字符串存储字节序列，包括文本、序列化对象和二进制数组。 因此，字符串是可以关联的最简单的值类型 一个 Redis 键。 默认情况下，单个 Redis 字符串的最大大小为 512 MB。</p>
<p>大多数字符串操作都是 O（1），这意味着它们非常高效。 但是，请注意 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/substr"><code>SUBSTR</code></a>、<a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/getrange"><code>GETRANGE</code></a> 和 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/setrange"><code>SETRANGE</code></a> 命令，它们可以是 O（n）。</p>
<h3 id="hash"><a class="markdownIt-Anchor" href="#hash"></a> hash</h3>
<p>Redis hash是结构化为字段值对集合的记录类型，Redis hash 是一个 string 类型的 field（字段） 和 value（值） 的映射表，hash 特别适合用于<strong>存储对象</strong>。</p>
<p>大多数 Redis 哈希命令都是 O（1）。</p>
<p>一些命令（如 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/hkeys"><code>HKEYS、</code></a><a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/hvals"><code>HVALS</code> 和</a> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/hgetall"><code>HGETALL</code></a>）是 O（n），其中 n 是字段值对的数量。</p>
<h3 id="list"><a class="markdownIt-Anchor" href="#list"></a> list</h3>
<p>Redis中的List其实就是链表（Redis用双端链表实现List）。</p>
<p>列表对于许多任务很有用，这是两个非常有代表性的用例 如下：</p>
<ul>
<li>记住用户发布到社交网络中的<strong>最新更新</strong>。</li>
<li><strong>进程之间的通信</strong>，使用使用者-生产者模式，其中生产者将项目推送到列表中，使用者（通常是<em>工作人员</em>）使用这些项目并执行操作。Redis 具有特殊的列表命令，使此用例更加可靠和高效。</li>
</ul>
<p>访问其头部或尾部的列表操作是 O（1），这意味着它们非常高效。 但是，操作列表中元素的命令通常是 O（n）。 这些示例包括 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/lindex"><code>LINDEX</code></a>、<a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/linsert"><code>LINSERT</code></a> 和 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/lset"><code>LSET。</code></a> 运行这些命令时要小心，主要是在对大型列表进行操作时。</p>
<h3 id="set"><a class="markdownIt-Anchor" href="#set"></a> set</h3>
<p>Redis 的 Set 是 String 类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p>
<p>Redis 集是唯一字符串（成员）的无序集合。 您可以使用 Redis 集有效地：</p>
<ul>
<li><strong>跟踪</strong>唯一项目（例如，跟踪访问给定博客文章的所有唯一 IP 地址）。</li>
<li><strong>表示关系</strong>（例如，具有给定角色的所有用户的集合）。</li>
<li>执行常见的集合操作，例如<strong>交集、并集和差分</strong>。</li>
</ul>
<p>大多数集合操作（包括添加、删除和检查项是否为集合成员）都是 O（1）。 这意味着它们非常高效。 但是，对于具有数十万或更多成员的大型集，在运行 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/smembers"><code>SMEMBERS</code></a> 命令时应格外小心。 此命令为 O（n），并在单个响应中返回整个集合。 作为替代方法，请考虑 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/sscan"><code>SSCAN，</code></a>它允许您以迭代方式检索集合的所有成员。</p>
<h3 id="sortedset"><a class="markdownIt-Anchor" href="#sortedset"></a> sortedSet</h3>
<p>Redis 排序集是按关联分数排序的唯一字符串（成员）的集合。 当多个字符串具有相同的分数时，字符串将按字典顺序排序。 排序集的一些用例包括：</p>
<ul>
<li><strong>排行榜</strong>。例如，您可以使用排序集轻松维护大型在线游戏中最高分的有序列表。</li>
<li><strong>速率限制器</strong>。特别是，您可以使用排序集来构建滑动窗口速率限制器，以防止过多的 API 请求。</li>
</ul>
<p>大多数排序集合运算是 O（log（n）），其中 <em>n</em> 是成员数。</p>
<p>在运行具有较大返回值（例如，数万或更多）的 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://redis.io/commands/zrange"><code>ZRANGE</code></a> 命令时要小心。 此命令的时间复杂度为 O（log（n） + m），其中 <em>m</em> 是返回的结果数。</p>
<h2 id="redis常用命令"><a class="markdownIt-Anchor" href="#redis常用命令"></a> redis常用命令</h2>
<h3 id="通用命令"><a class="markdownIt-Anchor" href="#通用命令"></a> 通用命令</h3>
<p>通用指令是部分数据类型的，都可以使用的指令，常见的有：</p>
<ul>
<li>KEYS：查看符合模板的所有key</li>
<li>DEL：删除一个指定的key</li>
<li>EXISTS：判断key是否存在</li>
<li>EXPIRE：给一个key设置有效期，有效期到期时该key会被自动删除</li>
<li>TTL：查看一个KEY的剩余有效期</li>
</ul>
<h3 id="string-2"><a class="markdownIt-Anchor" href="#string-2"></a> String</h3>
<p>String的常见命令有：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SET：添加或者修改已经存在的一个String类型的键值对</span></span><br><span class="line"><span class="built_in">set</span> key value </span><br><span class="line"><span class="comment"># GET：根据key获取String类型的value</span></span><br><span class="line">get key</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910094421648.png" alt="image-20230910094421648"></div><div class="image-meta"><span class="image-caption center">image-20230910094421648</span></div></div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># MSET：批量添加多个String类型的键值对</span></span><br><span class="line">mset key value [key value ... key value]</span><br><span class="line"><span class="comment"># MGET：根据多个key获取多个String类型的value</span></span><br><span class="line">mget key key ... key</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910095004564.png" alt="image-20230910095004564"></div><div class="image-meta"><span class="image-caption center">image-20230910095004564</span></div></div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># INCR/DECR：让一个整型的key自增1/自减1</span></span><br><span class="line">incr/decr key</span><br><span class="line"><span class="comment"># INCRBY/DECRBY:让一个整型的key自增/自减并指定步长，例如：incrby age:ezhixuan 2 让age值自增2</span></span><br><span class="line">incrby/decrby key increment/decrement</span><br><span class="line"><span class="comment"># INCRBYFLOAT：让一个浮点类型的数字自增并指定步长</span></span><br><span class="line">incrbyfloat key increment</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910095620287.png" alt="image-20230910095620287"></div><div class="image-meta"><span class="image-caption center">image-20230910095620287</span></div></div>
<blockquote>
<p>对于incr/decr在实际使用中直接使用incrby指定步长即可，增加填写正数，减少填写负数</p>
<p>若key不存在时会先初<code>始化为0</code>再进行操作</p>
<p>若key的存储值不能被解释为数字，则返回<code>错误</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SETNX：添加一个String类型的键值对，前提是这个key不存在，否则不执行</span></span><br><span class="line">setnx key value</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910100324015.png" alt="image-20230910100324015"></div><div class="image-meta"><span class="image-caption center">image-20230910100324015</span></div></div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SETEX：添加一个String类型的键值对，并且指定有效期</span></span><br><span class="line">setex key seconds value</span><br><span class="line"><span class="comment"># TTL：查看一个KEY的剩余有效期</span></span><br><span class="line">ttl key</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910100641315.png" alt="image-20230910100641315"></div><div class="image-meta"><span class="image-caption center">image-20230910100641315</span></div></div>
<h3 id="hash-2"><a class="markdownIt-Anchor" href="#hash-2"></a> Hash</h3>
<p>Hash的常见命令有：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># HSET 添加或者修改hash类型key的field的值</span></span><br><span class="line">hset key field value [field value ... field value]</span><br><span class="line"><span class="comment"># HGETALL：获取一个hash类型的key中的所有的field和value</span></span><br><span class="line">hgetall key</span><br><span class="line"><span class="comment"># HGET：获取一个hash类型key的field的value</span></span><br><span class="line">hget key field</span><br><span class="line"><span class="comment"># HKEYS：获取一个hash类型的key中的所有的field</span></span><br><span class="line">hkeys key</span><br><span class="line"><span class="comment"># HVALS: 获取一个hash类型的key中所有的field的value</span></span><br><span class="line">hvals key</span><br><span class="line"><span class="comment"># HMGET：批量获取多个hash类型key的field的值</span></span><br><span class="line">hmget key field [field ... field]</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910102106812.png" alt="image-20230910102106812"></div><div class="image-meta"><span class="image-caption center">image-20230910102106812</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910102505152.png" alt="image-20230910102505152"></div><div class="image-meta"><span class="image-caption center">image-20230910102505152</span></div></div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># HINCRBY:让一个hash类型key的字段值自增并指定步长 wage</span></span><br><span class="line">hincrby key field increment</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910102816901.png" alt="image-20230910102816901"></div><div class="image-meta"><span class="image-caption center">image-20230910102816901</span></div></div>
<blockquote>
<p>若key不存在时会先初<code>始化为0</code>再进行操作</p>
<p>若key的存储值不能被解释为数字，则返回<code>错误</code></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># HSETNX：添加一个hash类型的key的field值，前提是这个field不存在，否则不执行</span></span><br><span class="line">hsetnx key field value</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910103001935.png" alt="image-20230910103001935"></div><div class="image-meta"><span class="image-caption center">image-20230910103001935</span></div></div>
<h3 id="list-2"><a class="markdownIt-Anchor" href="#list-2"></a> List</h3>
<p>List的常见命令有：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># LPUSH(RPUSH):向列表左(右)侧插入一个或多个元素</span></span><br><span class="line">lpush(rpush) key value</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910103617539.png" alt="image-20230910103617539"></div><div class="image-meta"><span class="image-caption center">image-20230910103617539</span></div></div>
<p>此时列表里应该是有 2 3 9 8</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># LLEN: 返回列表长度</span></span><br><span class="line">llen key</span><br><span class="line"><span class="comment"># LRANGE:返回一段角标范围内的所有元素</span></span><br><span class="line">lrange key start stop</span><br><span class="line"><span class="comment"># LINDEX:返回列表中对应下标的元素</span></span><br><span class="line">lindex key index</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910104219300.png" alt="image-20230910104219300"></div><div class="image-meta"><span class="image-caption center">image-20230910104219300</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910104231479.png" alt="image-20230910104231479"></div><div class="image-meta"><span class="image-caption center">image-20230910104231479</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910104322343.png" alt="image-20230910104322343"></div><div class="image-meta"><span class="image-caption center">image-20230910104322343</span></div></div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># LPOP(RPOP)：移除并返回列表左(右)侧的第一个元素，没有则返回nil</span><br><span class="line">lpop(rpop) key</span><br><span class="line"># BLPOP和BRPOP：与LPOP和RPOP类似，只不过在没有元素时等待指定时间，而不是直接返回nil</span><br><span class="line">blpop(brpop) key timeout</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910104554375.png" alt="image-20230910104554375"></div><div class="image-meta"><span class="image-caption center">image-20230910104554375</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910104723789.png" alt="image-20230910104723789"></div><div class="image-meta"><span class="image-caption center">image-20230910104723789</span></div></div>
<p>此时会发生阻塞，等待100秒，在这100秒内，我另起一个控制台添加元素，则会被监听到并移除</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910104847624.png" alt="image-20230910104847624"></div><div class="image-meta"><span class="image-caption center">image-20230910104847624</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910104855681.png" alt="image-20230910104855681"></div><div class="image-meta"><span class="image-caption center">image-20230910104855681</span></div></div>
<h3 id="set-2"><a class="markdownIt-Anchor" href="#set-2"></a> Set</h3>
<p>Set的常见命令有：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SADD:向set中添加一个或多个元素</span></span><br><span class="line">sadd key member [member ... member]</span><br><span class="line"><span class="comment"># SISMEMBER:判断一个元素是否存在于set中</span></span><br><span class="line">sismember key member</span><br><span class="line"><span class="comment"># SMEMBERS:获取set中的所有元素</span></span><br><span class="line">smembers key</span><br><span class="line"><span class="comment"># SCARD: 获取set中的元素个数</span></span><br><span class="line">scard key</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910111015754.png" alt="image-20230910111015754"></div><div class="image-meta"><span class="image-caption center">image-20230910111015754</span></div></div>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># SRANDMEMBER:随机获取set中指定个数的元素(超过大小返回全部)</span></span><br><span class="line">srandmember key [count]</span><br><span class="line"><span class="comment"># SPOP:与SRANDMEMBER类似，差别在于SPOP获取并移除指定个数的元素</span></span><br><span class="line">spop key [count]</span><br><span class="line"><span class="comment"># SREM:移除set中的指定元素</span></span><br><span class="line">srem key member [member ... member]</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910111103188.png" alt="image-20230910111103188"></div><div class="image-meta"><span class="image-caption center">image-20230910111103188</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910111141708.png" alt="image-20230910111141708"></div><div class="image-meta"><span class="image-caption center">image-20230910111141708</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910111259652.png" alt="image-20230910111259652"></div><div class="image-meta"><span class="image-caption center">image-20230910111259652</span></div></div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># SINTER: 求多个集合的交集</span><br><span class="line">sinter key key [key]</span><br><span class="line"># SUNION: 求多个集合的并集</span><br><span class="line">sunion key key [key]</span><br><span class="line"># SDIFF: 求多个集合的差集</span><br><span class="line">sdiff key key [key]</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910111542814.png" alt="image-20230910111542814"></div><div class="image-meta"><span class="image-caption center">image-20230910111542814</span></div></div>
<h3 id="sortedset-2"><a class="markdownIt-Anchor" href="#sortedset-2"></a> sortedSet</h3>
<p>SortedSet的常见命令有：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ZADD:添加一个或多个元素到sorted set ，如果已经存在则更新其score值</span><br><span class="line">zadd key score member [score member ... score member]</span><br><span class="line"># ZSCORE:获取sorted set中的指定元素的score值</span><br><span class="line">zscore key member</span><br><span class="line"># ZCARD:获取sorted set中的元素个数</span><br><span class="line">zcard key</span><br><span class="line"># ZRANK(ZREVRANK):升序(降序)获取sorted set 中的指定元素的排名</span><br><span class="line">zrank key member</span><br><span class="line"># ZCOUNT:统计score值在给定范围内的所有元素的个数</span><br><span class="line">zcount key min max</span><br><span class="line"># ZRANGE(ZREVRANGE):按照score排序后，升序(降序)获取指定排名范围内的元素</span><br><span class="line">zrange key min max</span><br><span class="line"># ZRANGEBYSCORE(ZREVRANGEBYSCORE):按照score排序后，升序(降序)获取指定score范围内的元素</span><br><span class="line">zrangebyscore key min max</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910151725241.png" alt="image-20230910151725241"></div><div class="image-meta"><span class="image-caption center">image-20230910151725241</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910151738447.png" alt="image-20230910151738447"></div><div class="image-meta"><span class="image-caption center">image-20230910151738447</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910151746275.png" alt="image-20230910151746275"></div><div class="image-meta"><span class="image-caption center">image-20230910151746275</span></div></div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># ZINCRBY:让sorted set中的指定元素自增，步长为指定的increment值</span><br><span class="line">zincrby key increment member</span><br><span class="line"># ZREM:删除sorted set中的一个或多个指定元素</span><br><span class="line">zrem key member [member ... member]</span><br></pre></td></tr></table></figure>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910152127127.png" alt="image-20230910152127127"></div><div class="image-meta"><span class="image-caption center">image-20230910152127127</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20230910152237788.png" alt="image-20230910152237788"></div><div class="image-meta"><span class="image-caption center">image-20230910152237788</span></div></div>
<blockquote>
<p>所有的排名默认都是升序，如果要降序则在命令的Z后面添加REV即可，例如：</p>
<ul>
<li>
<p><strong>升序</strong>获取sorted set 中的指定元素的排名：ZRANK key member</p>
</li>
<li>
<p><strong>降序</strong>获取sorted set 中的指定元素的排名：ZREVRANK key memeber</p>
</li>
</ul>
</blockquote>
<h2 id="其他数据类型"><a class="markdownIt-Anchor" href="#其他数据类型"></a> 其他数据类型</h2>
<h3 id="bitmap"><a class="markdownIt-Anchor" href="#bitmap"></a> bitmap</h3>
<p>Redis的Bitmap是一种位图数据结构，用于在Redis中高效地存储和处理位操作。它以比特（bit）为单位进行存储和操作，可以用来表示某个特定事件的存在与否，比如用户签到、用户在线状态等。</p>
<p>Bitmap在Redis中以字符串形式存储，每个字节可以存储8个位（8个比特），即一个字节可以表示8个事件的状态。Bitmap可以动态地自动扩展以适应需要存储的位数。</p>
<p>Redis提供了一系列的位操作命令来操作Bitmap，包括设置指定位置的位值、获取指定位置的位值、统计指定范围内的位值为1的个数、对两个Bitmap进行逻辑运算等。</p>
<p>以下是一些常用的Bitmap命令和示例：</p>
<ul>
<li>
<p><code>SETBIT key offset value</code>：设置指定位置的位值为1或0。</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">SETBIT</span> mybitmap <span class="number">0</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>GETBIT key offset</code>：获取指定位置的位值。</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">GETBIT</span> mybitmap <span class="number">0</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>BITCOUNT key [start end]</code>：统计指定范围内的位值为1的个数。</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">BITCOUNT</span> mybitmap <span class="number">0</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>BITOP operation destkey key [key ...]</code>：对一个或多个Bitmap执行逻辑运算，并将结果存储到destkey中。操作可以是AND、OR、XOR、NOT等。</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">BITOP</span> AND resultbitmap mybitmap1 mybitmap2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Bitmap在存储和处理大规模位数据时非常高效，它占用的内存空间相对较小，并且各种位操作可以在常数时间内完成。因此，它可以用于各种场景，如数据统计、布隆过滤器、用户在线状态跟踪等。</p>
<h3 id="geogeospatial"><a class="markdownIt-Anchor" href="#geogeospatial"></a> Geo(Geospatial)</h3>
<p>GEO就是Geolocation的简写形式，代表地理坐标。Redis在3.2版本中加入了对GEO的支持，允许存储地理坐标信息，帮助我们根据经纬度来检索数据。此数据结构可用于查找给定半径或边界框内的邻近点。</p>


  
  <script>
    let tianliGPT_postSelector = '.md-text.content.post';
    let tianliGPT_key = '0b206f6e6a324c694de1';
  </script>
  <script defer src="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.9/tianli_gpt.js"></script>




<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>欢迎积极交流讨论，如有疑问请联系我</p>
</div></section><section id="share"><div class="header"><span>分享文章</span></div><div class="body"><div class="link"><input class="copy-area" readonly="true" id="copy-link" value="https://www.ezhixuan.xyz/post/bae4ff13/"></div><div class="social-wrap dis-select"><a class="social share-item wechat" onclick="util.toggle(&quot;qrcode-wechat&quot)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/b32ef3da1162a.svg"></a><a class="social share-item weibo" target="_blank" rel="external nofollow noopener noreferrer" href="https://service.weibo.com/share/share.php?url=https://www.ezhixuan.xyz/post/bae4ff13/&title=Redis - Ezhixuan&pics=/img/redis.jpg&summary=技术学习分享"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/80c07e4dbb303.svg"></a><a class="social share-item email" href="mailto:?subject=Redis - Ezhixuan&amp;body=https://www.ezhixuan.xyz/post/bae4ff13/"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/a1b00e20f425d.svg"></a><a class="social share-item link" onclick="util.copy(&quot;copy-link&quot;, &quot;复制成功&quot;)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/8411ed322ced6.svg"></a></div><div class="qrcode" id="qrcode-wechat" style="visibility:hidden;height:0"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=https://www.ezhixuan.xyz/post/bae4ff13/"></div></div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/post/c4e4d16f/">SpringDataRedis</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/post/e2534ec2/">使用腾讯云Cos实现上传下载</a></div></section></div>


<div class="related-wrap reveal" id="related-posts">
    <section class="header">
      <div class="title cap theme">您可能感兴趣的文章</div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="\post\c4e4d16f\" title="SpringDataRedis"><span class="title">SpringDataRedis</span><span class="excerpt">技术学习分享</span></a><a class="item" href="\post\3ba05f4e\" title="Knife4j"><span class="title">Knife4j</span><span class="excerpt">技术学习分享</span></a><a class="item" href="\post\b04a945b\" title="springSecurity"><span class="title">springSecurity</span><span class="excerpt">认证和授权</span></a><a class="item" href="\post\e2534ec2\" title="使用腾讯云Cos实现上传下载"><span class="title">使用腾讯云Cos实现上传下载</span><span class="excerpt">使用腾讯云cos实现上传下载</span></a><a class="item" href="\post\7830183e\" title="Springboot解决跨域问题"><span class="title">Springboot解决跨域问题</span><span class="excerpt">跨域问题</span></a></div></section></div>



  <div class="related-wrap md-text reveal" id="comments">
    <section class="header cmt-title cap theme">
      快来参与讨论吧
    </section>
    <section class="body cmt-body waline">
      

<div id="waline_container" class="waline_thread"><svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"/></svg></div>

    </section>
  </div>



      
<footer class="page-footer reveal fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">博客</span><a href="/">近期</a><a href="/categories/">分类</a><a href="/tags/">标签</a><a href="/archives/">归档</a></div><div class="sitemap-group"><span class="fs14">项目</span><a href="/">开源库</a></div><div class="sitemap-group"><span class="fs14">社交</span><a href="/">友链</a><a href="/">留言板</a></div><div class="sitemap-group"><span class="fs14">更多</span><a href="/">关于本站</a><a href="/">GitHub</a></div></div><div class="text"><p>本站由 <a href="/">@Ezhixuan</a> 使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>
本博客素材均来源于网络，如有侵权请联系 <a href="mailto:1248909111@qq.com" rel="external nofollow noopener noreferrer" target="_blank">1248909111@qq.com</a> 删除<br>
本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
<div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>，<span id="busuanzi_container_site_pv">总访问量: <span id="busuanzi_value_site_pv"></span>次</span>，<span id="busuanzi_container_site_uv">访客数: <span id="busuanzi_value_site_uv"></span>人</span></div></div></footer>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>
  function createtime() {
    var now = new Date();
    var grt= new Date("09/01/2023 00:00:00");
    now.setTime(now.getTime()+250);
    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
    document.getElementById("timeDate").innerHTML = "本站已运行 "+dnum+" 天 ";
    document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
  };
  setInterval("createtime()",250);
</script>

      <div class="float-panel mobile-only blur" style="display:none">
  <button type="button" class="sidebar-toggle mobile" onclick="sidebar.toggle()">
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"/><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"/></svg>
  </button>
</div>

    </div>
  </div>
  <div class="scripts">
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"codeblock":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script>
  function load_comment(){
    if(!document.getElementById("waline_container"))return;
    stellar.loadCSS('https://unpkg.com/@waline/client@v2/dist/waline.css');
    stellar.loadScript('https://unpkg.com/@waline/client@v2/dist/waline.js', {defer:true}).then(function () {
      const el = document.getElementById("waline_container");
      var path = el.getAttribute('comment_id');
      if (!path) {
        path = decodeURI(window.location.pathname);
      }
      Waline.init(Object.assign({"js":"https://unpkg.com/@waline/client@v2/dist/waline.js","css":"https://unpkg.com/@waline/client@v2/dist/waline.css","serverURL":"https://comment.ezhixuan.xyz/","commentCount":true,"pageview":false,"locale":{"placeholder":null},"emoji":["https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs"]}, {
        el: '#waline_container',
        path: path,
        
      }));
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
    console.log('DOM fully loaded and parsed');
    load_comment();
  });

</script>




<!-- inject -->


  </div>
</body>
</html>
