<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="generator" content="Hexo 6.3.0">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.19.0">
  <meta charset="utf-8">
  

  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="dns-prefetch" href="https://gcore.jsdelivr.net">
  <link rel="preconnect" href="https://gcore.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="//unpkg.com">

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>优雅的非空判断 - Ezhixuan</title>

  
    <meta name="description" content="如何优雅的非空判断">
<meta property="og:type" content="article">
<meta property="og:title" content="优雅的非空判断">
<meta property="og:url" content="https://www.ezhixuan.xyz/post/df2d6cfb/">
<meta property="og:site_name" content="Ezhixuan">
<meta property="og:description" content="如何优雅的非空判断">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/df2d6cfb/image-20231010023753723.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/df2d6cfb/image-20231010023310934.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/df2d6cfb/image-20231010023547920.png">
<meta property="og:image" content="https://www.ezhixuan.xyz/post/df2d6cfb/image-20231010023926959.png">
<meta property="article:published_time" content="2023-10-09T17:23:14.000Z">
<meta property="article:modified_time" content="2023-10-09T17:23:14.000Z">
<meta property="article:author" content="Ezhixuan">
<meta property="article:tag" content="java">
<meta property="article:tag" content="学习">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.ezhixuan.xyz/post/df2d6cfb/image-20231010023753723.png">
  
  
  
  <meta name="keywords" content="java,学习">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="Ezhixuan" type="application/atom+xml">
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  
    <link rel="shortcut icon" href="https://s1.ax1x.com/2023/09/02/pPB0E4O.png">
  

  

  
    <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
    <script defer src="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4" crossorigin="anonymous"></script>
    <script defer src="https://gcore.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
  


  
</head>

<body>
  




  <div class="l_body" id="start">
    <aside class="l_left" layout="post">
    

  

<header class="header"><div class="logo-wrap"><a class="avatar" href="/about/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/img/avatar.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">Ezhixuan</div><div class="sub normal cap">我们都要努力成为更好的自己</div><div class="sub hover cap" style="opacity:0"> 如果遇到了，就记录下来</div></a></div>

<nav class="menu dis-select"><a class="nav-item active" href="/">文章</a><a class="nav-item" href="/wiki/">项目</a><a class="nav-item" href="/notes/">随笔</a><a class="nav-item" href="/about/">关于</a></nav>
</header>


<div class="widgets">
<widget class="widget-wrapper search"><div class="widget-body"><div class="search-wrapper" id="search"><form class="search-form"><input type="text" class="search-input" id="search-input" data-filter="/post/" placeholder="文章搜索"><svg t="1670596976048" class="icon search-icon" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2676" width="200" height="200"><path d="M938.2 832.6L723.8 618.1c-2.5-2.5-5.3-4.4-7.9-6.4 36.2-55.6 57.3-121.8 57.3-193.1C773.3 222.8 614.6 64 418.7 64S64 222.8 64 418.6c0 195.9 158.8 354.6 354.6 354.6 71.3 0 137.5-21.2 193.2-57.4 2 2.7 3.9 5.4 6.3 7.8L832.5 938c14.6 14.6 33.7 21.9 52.8 21.9 19.1 0 38.2-7.3 52.8-21.8 29.2-29.1 29.2-76.4 0.1-105.5M418.7 661.3C284.9 661.3 176 552.4 176 418.6 176 284.9 284.9 176 418.7 176c133.8 0 242.6 108.9 242.6 242.7 0 133.7-108.9 242.6-242.6 242.6" p-id="2677"/></svg></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div></div></widget>


<widget class="widget-wrapper toc single" id="data-toc"><div class="widget-header cap dis-select"><span class="name">优雅的非空判断</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E9%9D%9E%E7%A9%BA%E5%88%A4%E6%96%AD"><span class="toc-text"> 如何优雅的非空判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hibernate-validator"><span class="toc-text"> hibernate-validator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text"> 导入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E9%9D%9E%E7%A9%BA%E6%B3%A8%E8%A7%A3"><span class="toc-text"> 关于非空注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8Evalid%E5%92%8Cvalidated"><span class="toc-text"> 关于@Valid和@Validated</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%82%E7%94%A8%E8%8C%83%E5%9B%B4"><span class="toc-text"> 适用范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E9%99%90%E5%88%B6"><span class="toc-text"> 使用限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%A0%A1%E9%AA%8C"><span class="toc-text"> 分组校验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E9%99%85%E4%BD%BF%E7%94%A8"><span class="toc-text"> 实际使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E5%B1%95-%E5%88%86%E7%BB%84"><span class="toc-text"> 拓展 - 分组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E5%B1%95-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text"> 拓展 - 异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E5%B1%95-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text"> 拓展 - 常用命令</span></a></li></ol></div></div></widget>




</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="https://github.com/Ezhixuan/" target="_blank" rel="external nofollow noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/08a41b181ce68.svg"></a></div></footer>

    </aside>
    <div class="l_main">
      

      



<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a><span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/">技术分享</a></div><div id="post-meta">发布于&nbsp;<time datetime="2023-10-09T17:23:14.000Z">2023-10-10</time></div></div>

<article class="md-text content post">
<h1 class="article-title"><span>优雅的非空判断</span></h1>
<h2 id="如何优雅的非空判断"><a class="markdownIt-Anchor" href="#如何优雅的非空判断"></a> 如何优雅的非空判断</h2>
<p>在编写代码的过程中，经常会遇到对于传输过来的数据有特殊要求，有一个错误总会在意料之外出现,那就是空指针异常。空指针的出现也很简单,得到了一个null对象,并调用它的某些方法,出现空指针异常。</p>
<p>对于简单的对象，我们可以使用 ！= null 再去使用，或者调用一些Api去校验，形如</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 校验参数</span></span><br><span class="line"><span class="keyword">if</span> (dishPageQueryDTO == <span class="literal">null</span></span><br><span class="line">    || dishPageQueryDTO.getPage() &lt;= <span class="number">0</span></span><br><span class="line">    || dishPageQueryDTO.getPageSize() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullDataException</span>(MessageConstant.NULL_DATA);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1.校验数据</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">check</span> <span class="operator">=</span> dishDTO.check();</span><br><span class="line"><span class="keyword">if</span> (!check) &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullDataException</span>(MessageConstant.NULL_DATA);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (ObjectUtils.isEmpty(o))&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于少量的参数这样不仅直观并且也能根据特定需求进行特殊判断，但是如果遇到参数过多的情况，就会导致核心业务代码还未开始编辑就产出大量的判断代码，甚至判断的代码量超过该业务的代码，并且我们在某个业务的代码无法在其他模块复用，因此，需要考虑如何优雅的进行非空判断。</p>
<hr>
<h2 id="hibernate-validator"><a class="markdownIt-Anchor" href="#hibernate-validator"></a> hibernate-validator</h2>
<p><code>hibernate-validator</code>提供多种特殊判断以及数值空值形如@Email,@Max,@Size…</p>
<p>更多的使用可以参考官方文档<a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.jboss.org/hibernate/validator/6.2/reference/en-US/html_single/#preface">Hibernate Validator 6.2.5.Final - Jakarta Bean Validation Reference Implementation: Reference Guide (jboss.org)</a></p>
<p>本篇主要介绍非空判断的使用</p>
<h3 id="导入依赖"><a class="markdownIt-Anchor" href="#导入依赖"></a> 导入依赖</h3>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.2.5.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="关于非空注解"><a class="markdownIt-Anchor" href="#关于非空注解"></a> 关于非空注解</h3>
<p>关于非空判断常用的注解有@NotNull, @NotBlank, @NotEmpty</p>
<p>对于这三个注解，官方给出的解释为</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### @NotBlank</span><br><span class="line"></span><br><span class="line">Checks that the annotated character sequence is not null and the trimmed length is greater than 0. The difference to is that this constraint can only be applied on character sequences and that trailing white-spaces are ignored.`@NotEmpty`</span><br><span class="line"></span><br><span class="line">- Supported data types</span><br><span class="line"></span><br><span class="line">  `CharSequence`</span><br><span class="line"></span><br><span class="line">- Hibernate metadata impact</span><br><span class="line"></span><br><span class="line">  None</span><br><span class="line"></span><br><span class="line">#### @NotEmpty</span><br><span class="line"></span><br><span class="line">Checks whether the annotated element is not null nor empty</span><br><span class="line"></span><br><span class="line">- Supported data types</span><br><span class="line"></span><br><span class="line">  `CharSequence`, , and arrays`Collection``Map`</span><br><span class="line"></span><br><span class="line">- Hibernate metadata impact</span><br><span class="line"></span><br><span class="line">  None</span><br><span class="line"></span><br><span class="line">#### @NotNull</span><br><span class="line"></span><br><span class="line">Checks that the annotated value is not `null`</span><br><span class="line"></span><br><span class="line">- Supported data types</span><br><span class="line"></span><br><span class="line">  Any type</span><br><span class="line"></span><br><span class="line">- Hibernate metadata impact</span><br><span class="line"></span><br><span class="line">  Column(s) are not nullable</span><br></pre></td></tr></table></figure>
<p>总结来说<code>@NotNull</code>适用于任何类型的非空判断，但是存在限制，即只能检查非空，因此引出<code>@NotBlank</code>和<code>@NotEmpty</code>，其中@NotBlank适用于字符串类型，它可以判断去空后size是否大于0，@NotEmpty在@NotBlank的基础上又增强拓展了对于集合等类型的判断。</p>
<p>@NotNull：用于验证字段或方法参数不为 null。它可以应用于任意类型的字段，包括基本类型和引用类型。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@NotNull</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure>
<p>@NotBlank：用于验证字符串字段或方法参数不为 null 且长度大于 0，且字符串不能仅由空格组成。它只适用于字符串类型的字段。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@NotBlank</span></span><br><span class="line"><span class="keyword">private</span> String title;</span><br></pre></td></tr></table></figure>
<p>@NotEmpty：用于验证字段或方法参数不为 null 且不为空，即长度大于 0。它适用于字符串、集合、Map 和数组类型的字段。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@NotEmpty</span></span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; tags;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，@NotBlank 和 @NotEmpty 注解都是对 @NotNull 注解的补充，所以如果应用 @NotBlank 或 @NotEmpty 注解时，该字段或方法参数会自动被认为不为 null。此外，它们都可以与其他的约束注解一起使用。</p>
<h2 id="关于valid和validated"><a class="markdownIt-Anchor" href="#关于valid和validated"></a> 关于@Valid和@Validated</h2>
<h3 id="适用范围"><a class="markdownIt-Anchor" href="#适用范围"></a> 适用范围</h3>
<p>@Valid 注解是 Java 标准库中的注解（javax.validation.Valid），而 @Validated 注解是 Spring 框架提供的注解（org.springframework.validation.annotation.Validated）。因此，如果在非 Spring 环境中使用验证框架，应该使用 @Valid 注解；如果在 Spring 环境中使用验证框架，则可以使用 @Validated 注解。</p>
<h3 id="使用限制"><a class="markdownIt-Anchor" href="#使用限制"></a> 使用限制</h3>
<p>@Validated 注解在 Spring 环境中的使用存在一些限制，它只能应用于类级别的验证（Class-level validation）和方法级别的验证（Method-level validation）。而 @Valid 注解可以应用于类的字段级别、方法的参数级别、方法的返回值级别等。</p>
<h3 id="分组校验"><a class="markdownIt-Anchor" href="#分组校验"></a> 分组校验</h3>
<p>@Validated 注解支持分组校验（Group Validation）功能，可以根据不同的场景对验证规则进行分组。通过在验证注解上使用分组接口进行声明，可以指定只验证特定分组的约束条件。这对于复杂的验证场景非常有用。而 @Valid 注解在验证过程中不支持分组校验。</p>
<h2 id="实际使用"><a class="markdownIt-Anchor" href="#实际使用"></a> 实际使用</h2>
<p>这里以我的实际使用举例，如有错误，欢迎指出</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ApiModel(&quot;友链添加DTO&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkDTO</span> &#123;</span><br><span class="line">  <span class="meta">@NotNull(message = &quot;友链id不能为空&quot;, groups = Update.class)</span></span><br><span class="line">  <span class="keyword">private</span> Long id;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@NotBlank(message = &quot;友链名称不能为空&quot;, groups = &#123;Insert.class,Update.class&#125;)</span></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@NotBlank(message = &quot;友链logo不能为空&quot;, groups = &#123;Insert.class,Update.class&#125;)</span></span><br><span class="line">  <span class="keyword">private</span> String logo;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@NotBlank(message = &quot;友链描述不能为空&quot;, groups = &#123;Insert.class,Update.class&#125;)</span></span><br><span class="line">  <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@NotBlank(message = &quot;友链地址不能为空&quot;, groups = &#123;Insert.class,Update.class&#125;)</span></span><br><span class="line">  <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@NotBlank(message = &quot;友链状态不能为空&quot;, groups = &#123;Insert.class,Update.class&#125;)</span></span><br><span class="line">  <span class="keyword">private</span> String status;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如上述代码所示，一般简单使用可以忽略groups参数，只填写message即可，默认会是<code>Default.class</code></p>
<p>groups个人理解为使用的分组，对于不同的分组，后续可以进行不同的操作</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Log(businessName = &quot;添加友链&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="meta">@ApiOperation(&quot;添加友链&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseResult&lt;String&gt; <span class="title function_">insertLinkSys</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Validated(Insert.class)</span> LinkDTO linkDto)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> linkService.insertLinkSys(linkDto);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在controller层我们在需要约束的传参前添加<code>@Valid</code>或<code>@Validated</code>注解，否则验证不会生效，在传参中我配置了分组，所以这里使用@Validated并进行分组校验，可以只对处于<code>Insert.class</code>分组的参数进行校验。如果没有进行分组则可以直接使用@Valid</p>
<p>请求参数，这里基本放空</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;address&quot;: &quot;&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;id&quot;: &quot;&quot;,</span><br><span class="line">  &quot;logo&quot;: &quot;&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;&quot;,</span><br><span class="line">  &quot;status&quot;: &quot;&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>响应</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="number">500</span>,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;Validation failed for argument [0] in public com.ezhixuan.xuan_framework.domain.vo.ResponseResult&lt;java.lang.String&gt; com.ezhixuan.xuan_admin.controller.LinkController.insertLinkSys(com.ezhixuan.xuan_framework.domain.dto.link.LinkDTO) with 5 errors: [Field error in object &#x27;linkDTO&#x27; on field &#x27;name&#x27;: rejected value []; codes [NotBlank.linkDTO.name,NotBlank.name,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [linkDTO.name,name]; arguments []; default message [name]]; default message [友链名称不能为空]] [Field error in object &#x27;linkDTO&#x27; on field &#x27;logo&#x27;: rejected value []; codes [NotBlank.linkDTO.logo,NotBlank.logo,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [linkDTO.logo,logo]; arguments []; default message [logo]]; default message [友链logo不能为空]] [Field error in object &#x27;linkDTO&#x27; on field &#x27;description&#x27;: rejected value []; codes [NotBlank.linkDTO.description,NotBlank.description,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [linkDTO.description,description]; arguments []; default message [description]]; default message [友链描述不能为空]] [Field error in object &#x27;linkDTO&#x27; on field &#x27;address&#x27;: rejected value []; codes [NotBlank.linkDTO.address,NotBlank.address,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [linkDTO.address,address]; arguments []; default message [address]]; default message [友链地址不能为空]] [Field error in object &#x27;linkDTO&#x27; on field &#x27;status&#x27;: rejected value []; codes [NotBlank.linkDTO.status,NotBlank.status,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [linkDTO.status,status]; arguments []; default message [status]]; default message [友链状态不能为空]] &quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到响应message中成功响应判断，并且只有分组为<code>Insert.class</code>的被处理，分组为<code>Update.class</code>的id虽然也是空但是<code>友链id不能为空</code>并没有出现在响应消息中。</p>
<hr>
<h2 id="拓展-分组"><a class="markdownIt-Anchor" href="#拓展-分组"></a> 拓展 - 分组</h2>
<p>分组的情况有多种，我使用的是自定义接口并继承Default即可，注意继承的类即可，不多赘述。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ezhixuan.xuan_framework.handler.validated;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.validation.groups.Default;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> ezhixuan</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Insert</span> <span class="keyword">extends</span> <span class="title class_">Default</span> &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="拓展-异常处理"><a class="markdownIt-Anchor" href="#拓展-异常处理"></a> 拓展 - 异常处理</h2>
<p>对于上文提到的返回消息并不符合自己项目的响应格式，所以需要自定义异常处理器。</p>
<p>使用@ExceptionHandler(MethodArgumentNotValidException.class)捕获异常</p>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20231010023753723.png" alt="image-20231010023753723"></div><div class="image-meta"><span class="image-caption center">image-20231010023753723</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20231010023310934.png" alt="image-20231010023310934"></div><div class="image-meta"><span class="image-caption center">image-20231010023310934</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20231010023547920.png" alt="image-20231010023547920"></div><div class="image-meta"><span class="image-caption center">image-20231010023547920</span></div></div>
<div class="tag-plugin image"><div class="image-bg"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="image-20231010023926959.png" alt="image-20231010023926959"></div><div class="image-meta"><span class="image-caption center">image-20231010023926959</span></div></div>
<p>由此可以得知ex.getBindingResult().getAllErrors()可以获得Message</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 获取异常信息</span></span><br><span class="line">    List&lt;ObjectError&gt; allErrors = ex.getBindingResult().getAllErrors();</span><br><span class="line">    ArrayList&lt;String&gt; errorsMessage = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(allErrors.size());</span><br><span class="line">    allErrors.forEach(error -&gt; errorsMessage.add(error.getDefaultMessage()));</span><br></pre></td></tr></table></figure>
<p>但其实没必要将所有问题一股脑反馈给用户，只需反应一条，逐步解决，循循渐进即可。</p>
<p>最终</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line">  <span class="keyword">public</span> ResponseResult <span class="title function_">exceptionHandler</span><span class="params">(MethodArgumentNotValidException ex)</span> &#123;</span><br><span class="line">    log.error(<span class="string">&quot;异常信息：&#123;&#125;&quot;</span>, ex);</span><br><span class="line">    <span class="comment">// 获取异常信息</span></span><br><span class="line">    List&lt;ObjectError&gt; allErrors = ex.getBindingResult().getAllErrors();</span><br><span class="line">    <span class="keyword">return</span> ResponseResult.errorResult(<span class="number">500</span>, allErrors.get(<span class="number">0</span>).getDefaultMessage());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;code&quot;</span>: <span class="number">500</span>,</span><br><span class="line">  <span class="string">&quot;message&quot;</span>: <span class="string">&quot;友链logo不能为空&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="拓展-常用命令"><a class="markdownIt-Anchor" href="#拓展-常用命令"></a> 拓展 - 常用命令</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@Null    限制必须为null</span><br><span class="line">@NotNull    限制必须不能为null</span><br><span class="line">@AssertFalse    限制必须为false</span><br><span class="line">@AssertTrue    限制必须为true</span><br><span class="line">@DecimalMax(value)    限制必须为一个不超过指定大小值的数字</span><br><span class="line">@DecimalMin(value)    限制必须为一个不低于指定大小值的数字</span><br><span class="line">@Digits(integert,fraction)    限制必须为一个小数,且整数部分位数不能超过integer,小数部分位数不能超过fraction</span><br><span class="line">@Futrue    限制必须为一个将来的日期</span><br><span class="line">@Past    限制必须为一个过去的日期</span><br><span class="line">@Max(value)    限制必须为一个不超过指定大小值的数字</span><br><span class="line">@Min(value)    限制必须为一个不低于指定大小值的数字</span><br><span class="line">@Pattern(value)    限制必须符合指定的正则表达式</span><br><span class="line">@Size(max,min)    限制字符长度必须处在max和min的值之间</span><br><span class="line">@NotEmpty    验证注解的元素值不为null且不为空(字符串长度不为0,集合大小不为0)</span><br><span class="line">@NotBlank    验证注解的元素值不为空(不为null,且去除首位空格后长度不为0),不同于@NotEmpty,@NotBlank只适用于字符串的校验且在校验时会去除字符串的空格</span><br><span class="line">@Email    验证值是否为邮箱,也可以通过正则表达式和flag指定自定义的email格式</span><br><span class="line">@Length    限制字符串参数长度</span><br><span class="line">@Range    限制数值类型或者字符串在指定范围</span><br><span class="line">@URL    对URL地址进行验证</span><br></pre></td></tr></table></figure>


  
  <script>
    let tianliGPT_postSelector = '.md-text.content.post';
    let tianliGPT_key = '0b206f6e6a324c694de1';
  </script>
  <script defer src="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.9/tianli_gpt.js"></script>




<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>许可协议</span></div><div class="body"><p>欢迎积极交流讨论，如有疑问请联系我</p>
</div></section><section id="share"><div class="header"><span>分享文章</span></div><div class="body"><div class="link"><input class="copy-area" readonly="true" id="copy-link" value="https://www.ezhixuan.xyz/post/df2d6cfb/"></div><div class="social-wrap dis-select"><a class="social share-item wechat" onclick="util.toggle(&quot;qrcode-wechat&quot)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/b32ef3da1162a.svg"></a><a class="social share-item weibo" target="_blank" rel="external nofollow noopener noreferrer" href="https://service.weibo.com/share/share.php?url=https://www.ezhixuan.xyz/post/df2d6cfb/&title=优雅的非空判断 - Ezhixuan&summary=如何优雅的非空判断"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/80c07e4dbb303.svg"></a><a class="social share-item email" href="mailto:?subject=优雅的非空判断 - Ezhixuan&amp;body=https://www.ezhixuan.xyz/post/df2d6cfb/"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/a1b00e20f425d.svg"></a><a class="social share-item link" onclick="util.copy(&quot;copy-link&quot;, &quot;复制成功&quot;)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.4/social/8411ed322ced6.svg"></a></div><div class="qrcode" id="qrcode-wechat" style="visibility:hidden;height:0"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=https://www.ezhixuan.xyz/post/df2d6cfb/"></div></div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="body"><div class="item" id="prev"></div><div class="item" id="next"><div class="note">较早文章</div><a href="/post/775b8c4e/">rabbitMq</a></div></section></div>


<div class="related-wrap reveal" id="related-posts">
    <section class="header">
      <div class="title cap theme">您可能感兴趣的文章</div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="\post\586965a7\" title="Xxl-Job"><span class="title">Xxl-Job</span><span class="excerpt">学习记录</span></a><a class="item" href="\post\c4e4d16f\" title="SpringDataRedis"><span class="title">SpringDataRedis</span><span class="excerpt">技术学习分享</span></a><a class="item" href="\post\3ba05f4e\" title="Knife4j"><span class="title">Knife4j</span><span class="excerpt">技术学习分享</span></a><a class="item" href="\post\bae4ff13\" title="Redis"><span class="title">Redis</span><span class="excerpt">技术学习分享</span></a><a class="item" href="\post\7830183e\" title="Springboot解决跨域问题"><span class="title">Springboot解决跨域问题</span><span class="excerpt">跨域问题</span></a></div></section></div>



  <div class="related-wrap md-text reveal" id="comments">
    <section class="header cmt-title cap theme">
      快来参与讨论吧
    </section>
    <section class="body cmt-body waline">
      

<div id="waline_container" class="waline_thread"><svg class="loading" style="vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2709"><path d="M832 512c0-176-144-320-320-320V128c211.2 0 384 172.8 384 384h-64zM192 512c0 176 144 320 320 320v64C300.8 896 128 723.2 128 512h64z" p-id="2710"/></svg></div>

    </section>
  </div>



      
<footer class="page-footer reveal fs12"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs14">博客</span><a href="/">近期</a><a href="/categories/">分类</a><a href="/tags/">标签</a><a href="/archives/">归档</a></div><div class="sitemap-group"><span class="fs14">项目</span><a href="/">开源库</a></div><div class="sitemap-group"><span class="fs14">社交</span><a href="/">友链</a><a href="/">留言板</a></div><div class="sitemap-group"><span class="fs14">更多</span><a href="/">关于本站</a><a href="/">GitHub</a></div></div><div class="text"><p>本站由 <a href="/">@Ezhixuan</a> 使用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/xaoxuu/hexo-theme-stellar">Stellar</a> 主题创建。<br>
本博客素材均来源于网络，如有侵权请联系 <a href="mailto:1248909111@qq.com" rel="external nofollow noopener noreferrer" target="_blank">1248909111@qq.com</a> 删除<br>
本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
<div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>，<span id="busuanzi_container_site_pv">总访问量: <span id="busuanzi_value_site_pv"></span>次</span>，<span id="busuanzi_container_site_uv">访客数: <span id="busuanzi_value_site_uv"></span>人</span></div></div></footer>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script>
  function createtime() {
    var now = new Date();
    var grt= new Date("09/01/2023 00:00:00");
    now.setTime(now.getTime()+250);
    days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
    hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
    if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
    mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
    snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
    document.getElementById("timeDate").innerHTML = "本站已运行 "+dnum+" 天 ";
    document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
  };
  setInterval("createtime()",250);
</script>

      <div class="float-panel mobile-only blur" style="display:none">
  <button type="button" class="sidebar-toggle mobile" onclick="sidebar.toggle()">
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"/><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"/></svg>
  </button>
</div>

    </div>
  </div>
  <div class="scripts">
    <script type="text/javascript">
  const stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = stellar.config.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.version = '1.0';
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.0';
  stellar.config = {
    date_suffix: {
      just: '刚刚',
      min: '分钟前',
      hour: '小时前',
      day: '天前',
      month: '个月前',
    },
    root : '/',
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://gcore.jsdelivr.net/npm/jquery@3.6.2/dist/jquery.min.js'
  };

  if ('local_search') {
    stellar.search = {};
    stellar.search.service = 'local_search';
    if (stellar.search.service == 'local_search') {
      let service_obj = Object.assign({}, {"field":"all","path":"/search.json","content":true,"codeblock":true,"sort":"-date"});
      stellar.search[stellar.search.service] = service_obj;
    }
  }

  // stellar js
  stellar.plugins.stellar = Object.assign({"sites":"/js/plugins/sites.js","friends":"/js/plugins/friends.js","ghinfo":"/js/plugins/ghinfo.js","timeline":"/js/plugins/timeline.js","linkcard":"/js/plugins/linkcard.js","fcircle":"/js/plugins/fcircle.js","weibo":"/js/plugins/weibo.js"});

  stellar.plugins.marked = Object.assign("https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js");
  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.css","js":"https://unpkg.com/swiper@8.4.5/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://gcore.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://gcore.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://gcore.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://gcore.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti@0.9.2/umd/heti.min.css","js":"https://unpkg.com/heti@0.9.2/umd/heti-addon.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.copycode = Object.assign({"enable":true,"js":"/js/plugins/copycode.js","default_text":"Copy","success_text":"Copied"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->

  <script>
  function load_comment(){
    if(!document.getElementById("waline_container"))return;
    stellar.loadCSS('https://unpkg.com/@waline/client@v2/dist/waline.css');
    stellar.loadScript('https://unpkg.com/@waline/client@v2/dist/waline.js', {defer:true}).then(function () {
      const el = document.getElementById("waline_container");
      var path = el.getAttribute('comment_id');
      if (!path) {
        path = decodeURI(window.location.pathname);
      }
      Waline.init(Object.assign({"js":"https://unpkg.com/@waline/client@v2/dist/waline.js","css":"https://unpkg.com/@waline/client@v2/dist/waline.css","serverURL":"https://comment.ezhixuan.xyz/","commentCount":true,"pageview":false,"locale":{"placeholder":null},"emoji":["https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs"]}, {
        el: '#waline_container',
        path: path,
        
      }));
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
    console.log('DOM fully loaded and parsed');
    load_comment();
  });

</script>




<!-- inject -->


  </div>
</body>
</html>
